print( "‡ Јаг§Є  NPCScript04.lua" )

--------------------------
--	Список сокращений	--
--------------------------
jp				= JumpPage
amp				= AutoMissionPage
ct				= CloseTalk
am				= AddMission
MissionCheck 	= HasFlag
mc				= MissionCheck

function test()
	Talk(1, "Привет, Пират! Давай поговорим чуть позже. Например в выходные) ")
	Text(1, "Хорошо. ", CloseTalk)
end

function Apoc_weapon()
	Talk( 1, "Привет, Пират. Я помогу тебе добыть оружие Апокалипсиса! ")
	Text( 1, "Хочу оружие Апокалипсиса! ", JumpPage, 2)
	Text( 1, "Уйти.", CloseTalk)
	Talk( 2, "Чтобы получить камень улучшения оружия Аполкалипсиса, принеси мне:_1. Руну снегурки;_2. Руну Медведя;_3. Руну Стража;_4. Руну Фантазма;_5. Руну Кабана;_6. Руну Повелителя снега;_7. Ключ дракона. ")
	InitTrigger()
	TriggerCondition( 1, HasItem, 8154, 1 )
	TriggerCondition( 1, HasItem, 8155, 1 )
	TriggerCondition( 1, HasItem, 8156, 1 )
	TriggerCondition( 1, HasItem, 8157, 1 )
	TriggerCondition( 1, HasItem, 8158, 1 )
	TriggerCondition( 1, HasItem, 8159, 1 )
	TriggerCondition( 1, HasItem, 182, 1 )
	TriggerAction( 1, TakeItem, 8154,1 ) -- Это функция "изьятия" предмета и в каком количестве
	TriggerAction( 1, TakeItem, 8155,1 ) -- Это функция "изьятия" предмета и в каком количестве
	TriggerAction( 1, TakeItem, 8156,1 ) -- Это функция "изьятия" предмета и в каком количестве
	TriggerAction( 1, TakeItem, 8157,1 ) -- Это функция "изьятия" предмета и в каком количестве
	TriggerAction( 1, TakeItem, 8158,1 ) -- Это функция "изьятия" предмета и в каком количестве
	TriggerAction( 1, TakeItem, 8159,1 ) -- Это функция "изьятия" предмета и в каком количестве
	TriggerAction( 1, TakeItem, 182,1 ) -- Это функция "изьятия" предмета и в каком количестве
	TriggerAction( 1, GiveItem, 8053,1,4 ) -- Это функция выдачи предмета (ID, кол-во)
	TriggerFailure( 1, JumpPage, 2 )
	Text( 2, "Обменять. ", MultiTrigger, GetMultiTrigger(), 1)
	Text( 2, "Уйти.", CloseTalk)
	AddNpcMission ( 1000  )
	AddNpcMission ( 1001  )
	AddNpcMission ( 1002  )
	AddNpcMission ( 1003  )
	AddNpcMission ( 1004  )
	AddNpcMission ( 1005  )
end

function Ka4_zone()
	InitTrigger()
	TriggerCondition( 1, Check_Reset,  2 ) --Больше или равно этому уровню ресета.
	TriggerCondition( 1, LvCheck, ">", 449 )
	TriggerAction( 1, JumpPage, 1 )
	TriggerFailure( 1, JumpPage, 2 )
	Start( GetMultiTrigger(), 1 )
	
	Talk( 1, "Привет, Пират. Хочешь попасть в кач зону?")
	Text( 1, "Да, телепортироваться. ", GoTo, 124, 137,  "halloween" )
	Text( 1, "Уйти.", CloseTalk)
	
	Talk( 2, "Чтобы попасть в зону кача, вы должны:_1. Быть выше 449 уровня;_2. Иметь второй ресет;_3. Подойти с 12:00 до 19:00. ")
	Text( 2, "Уйти.", CloseTalk)
end

function r_talk151()
	Talk( 1, "Синдбад: Привет! Я отвечаю здесь за потройку кораблей! ")
	InitTrigger()
	TriggerCondition( 1, IsBoatFull )
	TriggerAction( 1, SystemNotice, "Достигнуто максимальное количество кораблей. Нельзя больше построить корабль. ")
	TriggerFailure( 1, JumpPage, 2 )
	Text( 1, "Построить корабль ", MultiTrigger, GetMultiTrigger(), 1 )
	InitTrigger()
	TriggerCondition( 1, HasBoatInBerth, 1 )
	TriggerAction( 1, BoatLevelBerthList, 1 )
	TriggerFailure( 1, JumpPage, 3 )
	Text( 1, "Улучшить корабль ", MultiTrigger, GetMultiTrigger(), 1 )
	
	Talk( 2, "Синдбад: какой корабль желаете построить? ")
	InitTrigger()
	TriggerCondition( 1, BoatBuildCheck, 1 )
	TriggerAction( 1, CreateBoat, 1, 1 )
	Text( 2, "Построить Гуппи ", MultiTrigger, GetMultiTrigger(), 1 )
	InitTrigger()
	TriggerCondition( 1, BoatBuildCheck, 2 )
	TriggerAction( 1, CreateBoat, 2, 1 )
	Text( 2, "Построить Транспортер ", MultiTrigger, GetMultiTrigger(), 1 )
	InitTrigger()
	TriggerCondition( 1, BoatBuildCheck, 3 )
	TriggerAction( 1, CreateBoat, 3, 1 )
	Text( 2, "Построить Летучую рыбу ", MultiTrigger, GetMultiTrigger(), 1 )
	InitTrigger()
	TriggerCondition( 1, BoatBuildCheck, 6 )
	TriggerAction( 1, CreateBoat, 6, 1 )
	Text( 2, "Построить Рыбу-меч ", MultiTrigger, GetMultiTrigger(), 1 )

	Talk( 3, "Синдбад: Чтобы улучшить судно вы должны поставить его в эту гавань. Кроме того у вас должно быть необходимое количество опыта корабля. Опыт можно заработать убивая морских монстров. ")
end 

function r_talk152()
	Talk( 1, "Ширли: Привет! Я оператор флота. Что желаете? ")
	InitTrigger()
	TriggerCondition( 1, HasAllBoatInBerth, 1 )
	TriggerAction( 1, LuanchBerthList, 1, 2260,2829, 177 )
	TriggerFailure( 1, JumpPage, 3 )
	Text( 1, "Отправиться в путь ", MultiTrigger, GetMultiTrigger(), 1 )
	InitTrigger()
	TriggerCondition( 1, HasLuanchOut )
	TriggerAction( 1, RepairBoat )
	TriggerCondition( 2, HasBoatInBerth, 1 )
	TriggerAction( 2, RepairBerthList, 1 )
	TriggerFailure( 2, JumpPage, 4 )
	Text( 1, "Починить судно ", MultiTrigger, GetMultiTrigger(), 2 ) 
	InitTrigger()
	TriggerCondition( 1, HasLuanchOut )
	TriggerAction( 1, SupplyBoat )
	TriggerCondition( 2, HasBoatInBerth, 1 )
	TriggerAction( 2, SupplyBerthList, 1 )
	TriggerFailure( 2, JumpPage, 5 )
	Text( 1, "Заправить судно ", MultiTrigger, GetMultiTrigger(), 2 ) 
	InitTrigger()
	TriggerCondition( 1, HasDeadBoatInBerth, 1 )
	TriggerAction( 1, SalvageBerthList, 1 )
	TriggerFailure( 1, JumpPage, 6 )
	Text( 1, "Восстановить судно ", MultiTrigger, GetMultiTrigger(), 1 ) 

	Talk( 3, "Простите. У вас нет судна в этом порту. Если судно утонуло, то вам необходимо его восстановить. ")
	Talk( 4, "Простите. У вас нет судна в этом порту. Если судно утонуло, то вам необходимо его восстановить. ")
	Talk( 5, "Простите. У вас нет судна в этом порту. Если судно утонуло, то вам необходимо его восстановить. ")
	Talk( 6, "Простите, но вы можете восстановить судно лишь в том порту, где оно приписано! ")

end

function winter_port()
	Talk( 1, "Санни: Привет! Я оператор флота. Что желаете? ")
	Text( 1, "Купить билет ", BuyPage )
	Text( 1, "Уйти. ", CloseTalk)
	InitTrade()
	Other(	4602	)
end

function med_winter ()
	InitTrigger()
	TriggerCondition( 1, HasMoney, 5000 )
	TriggerAction( 1, TakeMoney, 5000 )
	TriggerAction( 1, ReAll )
	TriggerFailure( 1, JumpPage, 2 )
	Start( GetMultiTrigger(),1 )
	
	Talk( 2, "Чтобы вылечиться, принеси мне 5000 золота! ")
	Text( 2, "Убежать. ", CloseTalk )
end

function bank_winter()
	Talk( 1,  "Хрюша: Привет! Добро пожаловать в Банк Зимы. Могу ли я чем либо помочь? " )
	InitTrigger()
	TriggerCondition( 1, HasMoney, 2000 )
	TriggerAction( 1, TakeMoney, 2000 )
	TriggerAction( 1, OpenBank )
	TriggerFailure( 1, JumpPage, 2 )
	Text( 1,  "Хранилище (2000 золота) ", MultiTrigger, GetMultiTrigger(), 1)
	Text( 1,  "Покупка Купюр ", BuyPage )
	Talk( 2,  "Прости, но у тебя недостаточно денег на счету " )


	InitTrade()
	Weapon(	7476	)
	Weapon(	7491	)
	Weapon(	7492	)
	Weapon(	7493	)
	Weapon(	7742	)
	
end 

function baff_winter ()
	InitTrigger()
	TriggerAction( 1, MegaBuff )
	Start( GetMultiTrigger(), 1 )
end

function app_lanc1()
	Talk( 1, "Привет. Я продаю эксклюзивные аппарели оружия для Воителя. Имей в виду, цена тоже эксклюзивная! ")
	Text( 1, "Купить. ", BuyPage )
	Text( 1, "Уйти. ", CloseTalk )
	InitTrade()
	Weapon(	16127	)
	Weapon(	16128	)
	Weapon(	16129	)
	Weapon(	16130	)
	Weapon(	16131	)
	Weapon(	16132	)
	Weapon(	16133	)
	Weapon(	16134	)
	Weapon(	16135	)
	Weapon(	16136	)
	Weapon(	16137	)
	Weapon(	16138	)
	Weapon(	16139	)
	Weapon(	16140	)
	Weapon(	16141	)
	Weapon(	16142	)
	Weapon(	16143	)
	Weapon(	16144	)
	Weapon(	16145	)
	Weapon(	16146	)
	Weapon(	16147	)
	Weapon(	16148	)
	Weapon(	16149	)
	Weapon(	16150	)
	Weapon(	16151	)
	Weapon(	16152	)
	Weapon(	16153	)
	Weapon(	16154	)
	Weapon(	16155	)
	Weapon(	16156	)
	Weapon(	16157	)
	Weapon(	16158	)
	Weapon(	16159	)
	Weapon(	16160	)
	Weapon(	16161	)
	Weapon(	16162	)
	Weapon(	16163	)
	Weapon(	16164	)
	Weapon(	16165	)
	Weapon(	16166	)
	Weapon(	16167	)
	Weapon(	16168	)
	Weapon(	16169	)
	Weapon(	16170	)
	Weapon(	16171	)
	Weapon(	16172	)
	Weapon(	16173	)
	Weapon(	16174	)
end

function app_carc1()
	Talk( 1, "Привет. Я продаю эксклюзивные аппарели луков для Стрелка. Имей в виду, цена тоже эксклюзивная! ")
	Text( 1, "Купить. ", BuyPage )
	Text( 1, "Уйти. ", CloseTalk )
	InitTrade()
	Weapon(	16175	)
	Weapon(	16176	)
	Weapon(	16177	)
	Weapon(	16178	)
	Weapon(	16179	)
	Weapon(	16180	)
	Weapon(	16181	)
	Weapon(	16182	)
	Weapon(	16183	)
	Weapon(	16184	)
	Weapon(	16185	)
	Weapon(	16186	)
	Weapon(	16187	)
	Weapon(	16188	)
end

function app_fil1()
	Talk( 1, "Привет. Я продаю эксклюзивные аппарели оружия для Филлис. Имей в виду, цена тоже эксклюзивная! ")
	Text( 1, "Купить. ", BuyPage )
	Text( 1, "Уйти. ", CloseTalk )
	InitTrade()
	Weapon(	16189	)
	Weapon(	16190	)
	Weapon(	16191	)
	Weapon(	16192	)
	Weapon(	16193	)
	Weapon(	16194	)
	Weapon(	16195	)
	Weapon(	16196	)
	Weapon(	16197	)
	Weapon(	16198	)
	Weapon(	16199	)
	Weapon(	16200	)
	Weapon(	16201	)
	Weapon(	16202	)
	Weapon(	16203	)
	Weapon(	16204	)
	Weapon(	16205	)
	Weapon(	16206	)
	Weapon(	16207	)
	Weapon(	16208	)
	Weapon(	16209	)
	Weapon(	16210	)
	Weapon(	16211	)
	Weapon(	16212	)
	Weapon(	16213	)
	Weapon(	16214	)
	Weapon(	16215	)
	Weapon(	16216	)
end

function app_ami1()
	Talk( 1, "Привет. Я продаю эксклюзивные аппарели оружия для Ами. Имей в виду, цена тоже эксклюзивная! ")
	Text( 1, "Купить. ", BuyPage )
	Text( 1, "Уйти. ", CloseTalk )
	InitTrade()
	Weapon(	16217	)
	Weapon(	16218	)
	Weapon(	16219	)
	Weapon(	16220	)
	Weapon(	16221	)
	Weapon(	16222	)
	Weapon(	16223	)
	Weapon(	16224	)
	Weapon(	16225	)
	Weapon(	16226	)
	Defence(	16250	)
	Defence(	16251	)
	Defence(	16252	)
	Defence(	16253	)
	Defence(	16254	)
	Defence(	16255	)
	Defence(	16256	)
	Defence(	16257	)
	Defence(	16258	)
	Defence(	16259	)
end
function app_ami2()
	Talk( 1, "Привет. Я продаю эксклюзивные аппарели оружия для Ами. Имей в виду, цена тоже эксклюзивная! ")
	Text( 1, "Купить. ", BuyPage )
	Text( 1, "Уйти. ", CloseTalk )
	InitTrade()
	Weapon(	16227	)
	Weapon(	16228	)
	Weapon(	16229	)
	Weapon(	16230	)
	Weapon(	16231	)
	Weapon(	16232	)
	Weapon(	16233	)
	Weapon(	16234	)
	Weapon(	16235	)
	Weapon(	16236	)
	Weapon(	16237	)
	Weapon(	16238	)
	Weapon(	16239	)
	Weapon(	16240	)
	Weapon(	16241	)
	Weapon(	16242	)
	Weapon(	16243	)
	Weapon(	16244	)
	Weapon(	16245	)
	Weapon(	16246	)
	Weapon(	16247	)
	Weapon(	16248	)
	Weapon(	16249	)
end
